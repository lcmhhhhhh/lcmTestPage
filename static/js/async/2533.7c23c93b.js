"use strict";(self.webpackChunklcm_test_page=self.webpackChunklcm_test_page||[]).push([["2533"],{2629:function(e,r,s){s.r(r),s.d(r,{default:()=>d});var t=s(5893),i=s(65);function n(e){let r=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",pre:"pre",h3:"h3",ul:"ul",li:"li",strong:"strong",ol:"ol"},(0,i.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.h1,{id:"memory-import-processor",children:["Memory Import Processor",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#memory-import-processor",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["The Memory Import Processor is a feature that allows you to modularize your VE.md files by importing content from other files using the ",(0,t.jsx)(r.code,{children:"@file.md"})," syntax."]}),"\n",(0,t.jsxs)(r.h2,{id:"overview",children:["Overview",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#overview",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"This feature enables you to break down large VE.md files into smaller, more manageable components that can be reused across different contexts. The import processor supports both relative and absolute paths, with built-in safety features to prevent circular imports and ensure file access security."}),"\n",(0,t.jsxs)(r.h2,{id:"syntax",children:["Syntax",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#syntax",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["Use the ",(0,t.jsx)(r.code,{children:"@"})," symbol followed by the path to the file you want to import:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-markdown",children:"# Main VE.md file\n\nThis is the main content.\n\n@./components/instructions.md\n\nMore content here.\n\n@./shared/configuration.md\n"})}),"\n",(0,t.jsxs)(r.h2,{id:"supported-path-formats",children:["Supported Path Formats",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#supported-path-formats",children:"#"})]}),"\n",(0,t.jsxs)(r.h3,{id:"relative-paths",children:["Relative Paths",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#relative-paths",children:"#"})]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"@./file.md"})," - Import from the same directory"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"@../file.md"})," - Import from parent directory"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"@./components/file.md"})," - Import from subdirectory"]}),"\n"]}),"\n",(0,t.jsxs)(r.h3,{id:"absolute-paths",children:["Absolute Paths",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#absolute-paths",children:"#"})]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"@/absolute/path/to/file.md"})," - Import using absolute path"]}),"\n"]}),"\n",(0,t.jsxs)(r.h2,{id:"examples",children:["Examples",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#examples",children:"#"})]}),"\n",(0,t.jsxs)(r.h3,{id:"basic-import",children:["Basic Import",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#basic-import",children:"#"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-markdown",children:"# My VE.md\n\nWelcome to my project!\n\n@./getting-started.md\n\n## Features\n\n@./features/overview.md\n"})}),"\n",(0,t.jsxs)(r.h3,{id:"nested-imports",children:["Nested Imports",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#nested-imports",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"The imported files can themselves contain imports, creating a nested structure:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-markdown",children:"# main.md\n\n@./header.md\n@./content.md\n@./footer.md\n"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-markdown",children:"# header.md\n\n# Project Header\n\n@./shared/title.md\n"})}),"\n",(0,t.jsxs)(r.h2,{id:"safety-features",children:["Safety Features",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#safety-features",children:"#"})]}),"\n",(0,t.jsxs)(r.h3,{id:"circular-import-detection",children:["Circular Import Detection",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#circular-import-detection",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"The processor automatically detects and prevents circular imports:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-markdown",children:"# file-a.md\n\n@./file-b.md\n\n# file-b.md\n\n@./file-a.md \x3c!-- This will be detected and prevented --\x3e\n"})}),"\n",(0,t.jsxs)(r.h3,{id:"file-access-security",children:["File Access Security",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#file-access-security",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"validateImportPath"})," function ensures that imports are only allowed from specified directories, preventing access to sensitive files outside the allowed scope."]}),"\n",(0,t.jsxs)(r.h3,{id:"maximum-import-depth",children:["Maximum Import Depth",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#maximum-import-depth",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"To prevent infinite recursion, there's a configurable maximum import depth (default: 5 levels)."}),"\n",(0,t.jsxs)(r.h2,{id:"error-handling",children:["Error Handling",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#error-handling",children:"#"})]}),"\n",(0,t.jsxs)(r.h3,{id:"missing-files",children:["Missing Files",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#missing-files",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"If a referenced file doesn't exist, the import will fail gracefully with an error comment in the output."}),"\n",(0,t.jsxs)(r.h3,{id:"file-access-errors",children:["File Access Errors",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#file-access-errors",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"Permission issues or other file system errors are handled gracefully with appropriate error messages."}),"\n",(0,t.jsxs)(r.h2,{id:"code-region-detection",children:["Code Region Detection",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#code-region-detection",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["The import processor uses the ",(0,t.jsx)(r.code,{children:"marked"})," library to detect code blocks and inline code spans, ensuring that ",(0,t.jsx)(r.code,{children:"@"})," imports inside these regions are properly ignored. This provides robust handling of nested code blocks and complex Markdown structures."]}),"\n",(0,t.jsxs)(r.h2,{id:"import-tree-structure",children:["Import Tree Structure",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#import-tree-structure",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["The processor returns an import tree that shows the hierarchy of imported files, similar to Claude's ",(0,t.jsx)(r.code,{children:"/memory"})," feature. This helps users debug problems with their VE.md files by showing which files were read and their import relationships."]}),"\n",(0,t.jsx)(r.p,{children:"Example tree structure:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Memory Files\n L project: VE.md\n            L a.md\n              L b.md\n                L c.md\n              L d.md\n                L e.md\n                  L f.md\n            L included.md\n"})}),"\n",(0,t.jsx)(r.p,{children:"The tree preserves the order that files were imported and shows the complete import chain for debugging purposes."}),"\n",(0,t.jsxs)(r.h2,{id:"comparison-to-claude-codes-memory-claudemd-approach",children:["Comparison to Claude Code's ",(0,t.jsx)(r.code,{children:"/memory"})," (",(0,t.jsx)(r.code,{children:"claude.md"}),") Approach",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#comparison-to-claude-codes-memory-claudemd-approach",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["Claude Code's ",(0,t.jsx)(r.code,{children:"/memory"})," feature (as seen in ",(0,t.jsx)(r.code,{children:"claude.md"}),") produces a flat, linear document by concatenating all included files, always marking file boundaries with clear comments and path names. It does not explicitly present the import hierarchy, but the LLM receives all file contents and paths, which is sufficient for reconstructing the hierarchy if needed."]}),"\n",(0,t.jsx)(r.p,{children:"Note: The import tree is mainly for clarity during development and has limited relevance to LLM consumption."}),"\n",(0,t.jsxs)(r.h2,{id:"api-reference",children:["API Reference",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#api-reference",children:"#"})]}),"\n",(0,t.jsxs)(r.h3,{id:"processimportscontent-basepath-debugmode-importstate",children:[(0,t.jsx)(r.code,{children:"processImports(content, basePath, debugMode?, importState?)"}),(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#processimportscontent-basepath-debugmode-importstate",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"Processes import statements in VE.md content."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"content"})," (string): The content to process for imports"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"basePath"})," (string): The directory path where the current file is located"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"debugMode"})," (boolean, optional): Whether to enable debug logging (default: false)"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"importState"})," (ImportState, optional): State tracking for circular import prevention"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Returns:"})," Promise"," - Object containing processed content and import tree"]}),"\n",(0,t.jsxs)(r.h3,{id:"processimportsresult",children:[(0,t.jsx)(r.code,{children:"ProcessImportsResult"}),(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#processimportsresult",children:"#"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"interface ProcessImportsResult {\n  content: string; // The processed content with imports resolved\n  importTree: MemoryFile; // Tree structure showing the import hierarchy\n}\n"})}),"\n",(0,t.jsxs)(r.h3,{id:"memoryfile",children:[(0,t.jsx)(r.code,{children:"MemoryFile"}),(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#memoryfile",children:"#"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"interface MemoryFile {\n  path: string; // The file path\n  imports?: MemoryFile[]; // Direct imports, in the order they were imported\n}\n"})}),"\n",(0,t.jsxs)(r.h3,{id:"validateimportpathimportpath-basepath-alloweddirectories",children:[(0,t.jsx)(r.code,{children:"validateImportPath(importPath, basePath, allowedDirectories)"}),(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#validateimportpathimportpath-basepath-alloweddirectories",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"Validates import paths to ensure they are safe and within allowed directories."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"importPath"})," (string): The import path to validate"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"basePath"})," (string): The base directory for resolving relative paths"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"allowedDirectories"})," (string[]): Array of allowed directory paths"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Returns:"})," boolean - Whether the import path is valid"]}),"\n",(0,t.jsxs)(r.h3,{id:"findprojectrootstartdir",children:[(0,t.jsx)(r.code,{children:"findProjectRoot(startDir)"}),(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#findprojectrootstartdir",children:"#"})]}),"\n",(0,t.jsxs)(r.p,{children:["Finds the project root by searching for a ",(0,t.jsx)(r.code,{children:".git"})," directory upwards from the given start directory. Implemented as an ",(0,t.jsx)(r.strong,{children:"async"})," function using non-blocking file system APIs to avoid blocking the Node.js event loop."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"startDir"})," (string): The directory to start searching from"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Returns:"})," Promise"," - The project root directory (or the start directory if no ",(0,t.jsx)(r.code,{children:".git"})," is found)"]}),"\n",(0,t.jsxs)(r.h2,{id:"best-practices",children:["Best Practices",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#best-practices",children:"#"})]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Use descriptive file names"})," for imported components"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Keep imports shallow"})," - avoid deeply nested import chains"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Document your structure"})," - maintain a clear hierarchy of imported files"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Test your imports"})," - ensure all referenced files exist and are accessible"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Use relative paths"})," when possible for better portability"]}),"\n"]}),"\n",(0,t.jsxs)(r.h2,{id:"troubleshooting",children:["Troubleshooting",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#troubleshooting",children:"#"})]}),"\n",(0,t.jsxs)(r.h3,{id:"common-issues",children:["Common Issues",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#common-issues",children:"#"})]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Import not working"}),": Check that the file exists and the path is correct"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Circular import warnings"}),": Review your import structure for circular references"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Permission errors"}),": Ensure the files are readable and within allowed directories"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Path resolution issues"}),": Use absolute paths if relative paths aren't resolving correctly"]}),"\n"]}),"\n",(0,t.jsxs)(r.h3,{id:"debug-mode",children:["Debug Mode",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#debug-mode",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"Enable debug mode to see detailed logging of the import process:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"const result = await processImports(content, basePath, true);\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,i.ah)(),e.components);return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(n,{...e})}):n(e)}let d=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fcore%2Fmemport.md"]={toc:[{text:"Overview",id:"overview",depth:2},{text:"Syntax",id:"syntax",depth:2},{text:"Supported Path Formats",id:"supported-path-formats",depth:2},{text:"Relative Paths",id:"relative-paths",depth:3},{text:"Absolute Paths",id:"absolute-paths",depth:3},{text:"Examples",id:"examples",depth:2},{text:"Basic Import",id:"basic-import",depth:3},{text:"Nested Imports",id:"nested-imports",depth:3},{text:"Safety Features",id:"safety-features",depth:2},{text:"Circular Import Detection",id:"circular-import-detection",depth:3},{text:"File Access Security",id:"file-access-security",depth:3},{text:"Maximum Import Depth",id:"maximum-import-depth",depth:3},{text:"Error Handling",id:"error-handling",depth:2},{text:"Missing Files",id:"missing-files",depth:3},{text:"File Access Errors",id:"file-access-errors",depth:3},{text:"Code Region Detection",id:"code-region-detection",depth:2},{text:"Import Tree Structure",id:"import-tree-structure",depth:2},{text:"Comparison to Claude Code's `/memory` (`claude.md`) Approach",id:"comparison-to-claude-codes-memory-claudemd-approach",depth:2},{text:"API Reference",id:"api-reference",depth:2},{text:"`processImports(content, basePath, debugMode?, importState?)`",id:"processimportscontent-basepath-debugmode-importstate",depth:3},{text:"`ProcessImportsResult`",id:"processimportsresult",depth:3},{text:"`MemoryFile`",id:"memoryfile",depth:3},{text:"`validateImportPath(importPath, basePath, allowedDirectories)`",id:"validateimportpathimportpath-basepath-alloweddirectories",depth:3},{text:"`findProjectRoot(startDir)`",id:"findprojectrootstartdir",depth:3},{text:"Best Practices",id:"best-practices",depth:2},{text:"Troubleshooting",id:"troubleshooting",depth:2},{text:"Common Issues",id:"common-issues",depth:3},{text:"Debug Mode",id:"debug-mode",depth:3}],title:"Memory Import Processor",headingTitle:"Memory Import Processor",frontmatter:{}}}}]);