"use strict";(self.webpackChunklcm_test_page=self.webpackChunklcm_test_page||[]).push([["414"],{397:function(e,n,s){s.r(n),s.d(n,{default:()=>a});var i=s(5893),r=s(65);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",ul:"ul",li:"li",strong:"strong",h3:"h3",ol:"ol"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"sandboxing-in-the-vecli",children:["Sandboxing in the VeCLI",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#sandboxing-in-the-vecli",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"This document provides a guide to sandboxing in the VeCLI, including prerequisites, quickstart, and configuration."}),"\n",(0,i.jsxs)(n.h2,{id:"prerequisites",children:["Prerequisites",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#prerequisites",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Before using sandboxing, you need to install and set up the VeCLI:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install -g @vecode-cli/vecode-cli\n"})}),"\n",(0,i.jsx)(n.p,{children:"To verify the installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"gemini --version\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"overview-of-sandboxing",children:["Overview of sandboxing",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#overview-of-sandboxing",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Sandboxing isolates potentially dangerous operations (such as shell commands or file modifications) from your host system, providing a security barrier between AI operations and your environment."}),"\n",(0,i.jsx)(n.p,{children:"The benefits of sandboxing include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security"}),": Prevent accidental system damage or data loss."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Isolation"}),": Limit file system access to project directory."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistency"}),": Ensure reproducible environments across different systems."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Safety"}),": Reduce risk when working with untrusted code or experimental commands."]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"sandboxing-methods",children:["Sandboxing methods",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#sandboxing-methods",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Your ideal method of sandboxing may differ depending on your platform and your preferred container solution."}),"\n",(0,i.jsxs)(n.h3,{id:"1-macos-seatbelt-macos-only",children:["1. macOS Seatbelt (macOS only)",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-macos-seatbelt-macos-only",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["Lightweight, built-in sandboxing using ",(0,i.jsx)(n.code,{children:"sandbox-exec"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Default profile"}),": ",(0,i.jsx)(n.code,{children:"permissive-open"})," - restricts writes outside project directory but allows most other operations."]}),"\n",(0,i.jsxs)(n.h3,{id:"2-container-based-dockerpodman",children:["2. Container-based (Docker/Podman)",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-container-based-dockerpodman",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Cross-platform sandboxing with complete process isolation."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Requires building the sandbox image locally or using a published image from your organization's registry."]}),"\n",(0,i.jsxs)(n.h2,{id:"quickstart",children:["Quickstart",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#quickstart",children:"#"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Enable sandboxing with command flag\ngemini -s -p "analyze the code structure"\n\n# Use environment variable\nexport GEMINI_SANDBOX=true\ngemini -p "run the test suite"\n\n# Configure in settings.json\n{\n  "tools": {\n    "sandbox": "docker"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"configuration",children:["Configuration",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration",children:"#"})]}),"\n",(0,i.jsxs)(n.h3,{id:"enable-sandboxing-in-order-of-precedence",children:["Enable sandboxing (in order of precedence)",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable-sandboxing-in-order-of-precedence",children:"#"})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Command flag"}),": ",(0,i.jsx)(n.code,{children:"-s"})," or ",(0,i.jsx)(n.code,{children:"--sandbox"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment variable"}),": ",(0,i.jsx)(n.code,{children:"GEMINI_SANDBOX=true|docker|podman|sandbox-exec"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Settings file"}),": ",(0,i.jsx)(n.code,{children:'"sandbox": true'})," in the ",(0,i.jsx)(n.code,{children:"tools"})," object of your ",(0,i.jsx)(n.code,{children:"settings.json"})," file (e.g., ",(0,i.jsx)(n.code,{children:'{"tools": {"sandbox": true}}'}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"macos-seatbelt-profiles",children:["macOS Seatbelt profiles",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#macos-seatbelt-profiles",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["Built-in profiles (set via ",(0,i.jsx)(n.code,{children:"SEATBELT_PROFILE"})," env var):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"permissive-open"})," (default): Write restrictions, network allowed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"permissive-closed"}),": Write restrictions, no network"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"permissive-proxied"}),": Write restrictions, network via proxy"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"restrictive-open"}),": Strict restrictions, network allowed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"restrictive-closed"}),": Maximum restrictions"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"custom-sandbox-flags",children:["Custom Sandbox Flags",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#custom-sandbox-flags",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["For container-based sandboxing, you can inject custom flags into the ",(0,i.jsx)(n.code,{children:"docker"})," or ",(0,i.jsx)(n.code,{children:"podman"})," command using the ",(0,i.jsx)(n.code,{children:"SANDBOX_FLAGS"})," environment variable. This is useful for advanced configurations, such as disabling security features for specific use cases."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example (Podman)"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"To disable SELinux labeling for volume mounts, you can set the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export SANDBOX_FLAGS="--security-opt label=disable"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Multiple flags can be provided as a space-separated string:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export SANDBOX_FLAGS="--flag1 --flag2=value"\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"linux-uidgid-handling",children:["Linux UID/GID handling",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#linux-uidgid-handling",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"The sandbox automatically handles user permissions on Linux. Override these permissions with:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export SANDBOX_SET_UID_GID=true   # Force host UID/GID\nexport SANDBOX_SET_UID_GID=false  # Disable UID/GID mapping\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"troubleshooting",children:["Troubleshooting",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#troubleshooting",children:"#"})]}),"\n",(0,i.jsxs)(n.h3,{id:"common-issues",children:["Common issues",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#common-issues",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:'"Operation not permitted"'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Operation requires access outside sandbox."}),"\n",(0,i.jsx)(n.li,{children:"Try more permissive profile or add mount points."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Missing commands"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add to custom Dockerfile."}),"\n",(0,i.jsxs)(n.li,{children:["Install via ",(0,i.jsx)(n.code,{children:"sandbox.bashrc"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Network issues"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check sandbox profile allows network."}),"\n",(0,i.jsx)(n.li,{children:"Verify proxy configuration."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"debug-mode",children:["Debug mode",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debug-mode",children:"#"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'DEBUG=1 gemini -s -p "debug command"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," If you have ",(0,i.jsx)(n.code,{children:"DEBUG=true"})," in a project's ",(0,i.jsx)(n.code,{children:".env"})," file, it won't affect gemini-cli due to automatic exclusion. Use ",(0,i.jsx)(n.code,{children:".ve/.env"})," files for gemini-cli specific debug settings."]}),"\n",(0,i.jsxs)(n.h3,{id:"inspect-sandbox",children:["Inspect sandbox",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#inspect-sandbox",children:"#"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check environment\ngemini -s -p "run shell command: env | grep SANDBOX"\n\n# List mounts\ngemini -s -p "run shell command: mount | grep workspace"\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"security-notes",children:["Security notes",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#security-notes",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sandboxing reduces but doesn't eliminate all risks."}),"\n",(0,i.jsx)(n.li,{children:"Use the most restrictive profile that allows your work."}),"\n",(0,i.jsx)(n.li,{children:"Container overhead is minimal after first build."}),"\n",(0,i.jsx)(n.li,{children:"GUI applications may not work in sandboxes."}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"related-documentation",children:["Related documentation",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#related-documentation",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/cli/configuration",children:"Configuration"}),": Full configuration options."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/cli/commands",children:"Commands"}),": Available commands."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/troubleshooting",children:"Troubleshooting"}),": General troubleshooting."]}),"\n"]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}let a=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["sandbox.md"]={toc:[{text:"Prerequisites",id:"prerequisites",depth:2},{text:"Overview of sandboxing",id:"overview-of-sandboxing",depth:2},{text:"Sandboxing methods",id:"sandboxing-methods",depth:2},{text:"1. macOS Seatbelt (macOS only)",id:"1-macos-seatbelt-macos-only",depth:3},{text:"2. Container-based (Docker/Podman)",id:"2-container-based-dockerpodman",depth:3},{text:"Quickstart",id:"quickstart",depth:2},{text:"Configuration",id:"configuration",depth:2},{text:"Enable sandboxing (in order of precedence)",id:"enable-sandboxing-in-order-of-precedence",depth:3},{text:"macOS Seatbelt profiles",id:"macos-seatbelt-profiles",depth:3},{text:"Custom Sandbox Flags",id:"custom-sandbox-flags",depth:3},{text:"Linux UID/GID handling",id:"linux-uidgid-handling",depth:2},{text:"Troubleshooting",id:"troubleshooting",depth:2},{text:"Common issues",id:"common-issues",depth:3},{text:"Debug mode",id:"debug-mode",depth:3},{text:"Inspect sandbox",id:"inspect-sandbox",depth:3},{text:"Security notes",id:"security-notes",depth:2},{text:"Related documentation",id:"related-documentation",depth:2}],title:"Sandboxing in the VeCLI",headingTitle:"Sandboxing in the VeCLI",frontmatter:{}}}}]);