"use strict";(self.webpackChunklcm_test_page=self.webpackChunklcm_test_page||[]).push([["1792"],{5365:function(e,n,s){s.r(n),s.d(n,{default:()=>c});var r=s(5893),i=s(65);function h(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",code:"code",ol:"ol",li:"li",strong:"strong",ul:"ul",h3:"h3",pre:"pre"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"检查点",children:["检查点",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#检查点",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"VeCLI 包含一个检查点功能，该功能在 AI 驱动的工具对项目文件进行任何修改之前，会自动保存项目状态的快照。这使您可以安全地试验和应用代码更改，因为您知道可以立即恢复到工具运行之前的状态。"}),"\n",(0,r.jsxs)(n.h2,{id:"工作原理",children:["工作原理",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#工作原理",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当您批准修改文件系统的工具（如 ",(0,r.jsx)(n.code,{children:"write_file"})," 或 ",(0,r.jsx)(n.code,{children:"replace"}),"）时，CLI 会自动创建一个“检查点”。此检查点包括："]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Git 快照："})," 在您主目录 (",(0,r.jsx)(n.code,{children:"~/.ve/history/<project_hash>"}),") 中的特殊影子 Git 仓库中进行一次提交。此快照捕获了当时项目文件的完整状态。它",(0,r.jsx)(n.strong,{children:"不会"}),"干扰您自己的项目 Git 仓库。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"对话历史："})," 您与代理进行的整个对话都会被保存。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"工具调用："})," 即将执行的特定工具调用也会被存储。"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["如果您想撤销更改或只是想返回，可以使用 ",(0,r.jsx)(n.code,{children:"/restore"})," 命令。恢复检查点将："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"将项目中的所有文件恢复到快照中捕获的状态。"}),"\n",(0,r.jsx)(n.li,{children:"在 CLI 中恢复对话历史。"}),"\n",(0,r.jsx)(n.li,{children:"重新提出原始工具调用，允许您再次运行它、修改它或简单地忽略它。"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["所有检查点数据，包括 Git 快照和对话历史，都存储在您本地的机器上。Git 快照存储在影子仓库中，而对话历史和工具调用则保存在项目临时目录中的一个 JSON 文件中，通常位于 ",(0,r.jsx)(n.code,{children:"~/.ve/tmp/<project_hash>/checkpoints"}),"。"]}),"\n",(0,r.jsxs)(n.h2,{id:"启用此功能",children:["启用此功能",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#启用此功能",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["检查点功能默认是禁用的。您可以通过使用命令行标志或编辑 ",(0,r.jsx)(n.code,{children:"settings.json"})," 文件来启用它。"]}),"\n",(0,r.jsxs)(n.h3,{id:"使用命令行标志",children:["使用命令行标志",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用命令行标志",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["您可以在启动 VeCLI 时使用 ",(0,r.jsx)(n.code,{children:"--checkpointing"})," 标志为当前会话启用检查点："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"vecli --checkpointing\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"使用-settingsjson-文件",children:["使用 ",(0,r.jsx)(n.code,{children:"settings.json"})," 文件",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-settingsjson-文件",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["要默认为所有会话启用检查点，您需要编辑 ",(0,r.jsx)(n.code,{children:"settings.json"})," 文件。"]}),"\n",(0,r.jsxs)(n.p,{children:["将以下键添加到您的 ",(0,r.jsx)(n.code,{children:"settings.json"})," 中："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "general": {\n    "checkpointing": {\n      "enabled": true\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"使用-restore-命令",children:["使用 ",(0,r.jsx)(n.code,{children:"/restore"})," 命令",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-restore-命令",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["启用后，检查点会自动创建。要管理它们，您可以使用 ",(0,r.jsx)(n.code,{children:"/restore"})," 命令。"]}),"\n",(0,r.jsxs)(n.h3,{id:"列出可用的检查点",children:["列出可用的检查点",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#列出可用的检查点",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"要查看当前项目所有已保存检查点的列表，只需运行："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/restore\n"})}),"\n",(0,r.jsxs)(n.p,{children:["CLI 将显示可用检查点文件的列表。这些文件名通常由时间戳、被修改文件的名称以及即将运行的工具名称组成（例如，",(0,r.jsx)(n.code,{children:"2025-06-22T10-00-00_000Z-my-file.txt-write_file"}),"）。"]}),"\n",(0,r.jsxs)(n.h3,{id:"恢复特定检查点",children:["恢复特定检查点",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#恢复特定检查点",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"要将项目恢复到特定检查点，请使用列表中的检查点文件："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/restore <checkpoint_file>\n"})}),"\n",(0,r.jsx)(n.p,{children:"例如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/restore 2025-06-22T10-00-00_000Z-my-file.txt-write_file\n"})}),"\n",(0,r.jsx)(n.p,{children:"运行命令后，您的文件和对话将立即恢复到创建检查点时的状态，并且原始工具提示将重新出现。"})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}let c=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fcheckpointing.md"]={toc:[{text:"工作原理",id:"工作原理",depth:2},{text:"启用此功能",id:"启用此功能",depth:2},{text:"使用命令行标志",id:"使用命令行标志",depth:3},{text:"使用 `settings.json` 文件",id:"使用-settingsjson-文件",depth:3},{text:"使用 `/restore` 命令",id:"使用-restore-命令",depth:2},{text:"列出可用的检查点",id:"列出可用的检查点",depth:3},{text:"恢复特定检查点",id:"恢复特定检查点",depth:3}],title:"检查点",headingTitle:"检查点",frontmatter:{}}}}]);