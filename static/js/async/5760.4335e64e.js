"use strict";(self.webpackChunklcm_test_page=self.webpackChunklcm_test_page||[]).push([["5760"],{2615:function(e,n,r){r.r(n),r.d(n,{default:()=>c});var s=r(5893),d=r(65);function h(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",ul:"ul",li:"li",strong:"strong"},(0,d.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"vecli-核心",children:["VeCLI 核心",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vecli-核心",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["VeCLI 的核心包 (",(0,s.jsx)(n.code,{children:"packages/core"}),") 是 VeCLI 的后端部分，负责与火山引擎 API 通信、管理工具以及处理从 ",(0,s.jsx)(n.code,{children:"packages/cli"})," 发送的请求。有关 VeCLI 的一般概述，请参阅 ",(0,s.jsx)(n.a,{href:"/zh/index",children:"主文档页面"}),"。"]}),"\n",(0,s.jsxs)(n.h2,{id:"导航此部分",children:["导航此部分",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#导航此部分",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"/zh/core/tools-api",children:"核心工具 API"}),":"]})," 有关核心如何定义、注册和使用工具的信息。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"/zh/core/memport",children:"内存导入处理器"}),":"]})," 使用 @file.md 语法的模块化 VE.md 导入功能的文档。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"核心的作用",children:["核心的作用",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#核心的作用",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["虽然 VeCLI 的 ",(0,s.jsx)(n.code,{children:"packages/cli"})," 部分提供了用户界面，但 ",(0,s.jsx)(n.code,{children:"packages/core"})," 负责："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"火山引擎 API 交互:"})," 安全地与火山引擎 API 通信，发送用户提示并接收模型响应。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"提示工程:"})," 为火山引擎模型构建有效的提示，可能包含对话历史、工具定义以及来自 ",(0,s.jsx)(n.code,{children:"VE.md"})," 文件的指令上下文。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"工具管理与编排:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"注册可用工具（例如，文件系统工具、shell 命令执行）。"}),"\n",(0,s.jsx)(n.li,{children:"解释来自火山引擎模型的工具使用请求。"}),"\n",(0,s.jsx)(n.li,{children:"使用提供的参数执行请求的工具。"}),"\n",(0,s.jsx)(n.li,{children:"将工具执行结果返回给火山引擎模型以进行进一步处理。"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"会话和状态管理:"})," 跟踪对话状态，包括历史记录和进行连贯交互所需的任何相关上下文。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"配置:"})," 管理核心特定的配置，例如 API 密钥访问、模型选择和工具设置。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"安全注意事项",children:["安全注意事项",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安全注意事项",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"核心在安全方面发挥着至关重要的作用："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API 密钥管理:"})," 它处理 ",(0,s.jsx)(n.code,{children:"VOLCENGINE_API_KEY"})," 并确保在与火山引擎 API 通信时安全地使用它。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"工具执行:"})," 当工具与本地系统交互时（例如，",(0,s.jsx)(n.code,{children:"run_shell_command"}),"），核心（及其底层工具实现）必须以适当的谨慎进行操作，通常涉及沙盒机制以防止意外修改。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"聊天历史压缩",children:["聊天历史压缩",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#聊天历史压缩",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"为了确保长对话不会超过火山引擎模型的令牌限制，核心包含了一个聊天历史压缩功能。"}),"\n",(0,s.jsx)(n.p,{children:"当对话接近配置模型的令牌限制时，核心会在将对话历史发送到模型之前自动压缩它。这种压缩在传达的信息方面被设计为无损的，但它减少了使用的令牌总数。"}),"\n",(0,s.jsxs)(n.p,{children:["您可以在 ",(0,s.jsx)(n.a,{href:"https://console.volcengine.com/ark/",target:"_blank",rel:"noopener noreferrer",children:"火山引擎方舟平台"})," 中找到每个模型的令牌限制。"]}),"\n",(0,s.jsxs)(n.h2,{id:"模型回退",children:["模型回退",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#模型回退",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:'VeCLI 包含一个模型回退机制，以确保即使默认的 "pro" 模型受到速率限制，您也可以继续使用 CLI。'}),"\n",(0,s.jsx)(n.p,{children:'如果您使用的是默认的 "pro" 模型，并且 CLI 检测到您受到速率限制，它会自动在当前会话中切换到 "flash" 模型。这使您能够继续工作而不会中断。'}),"\n",(0,s.jsxs)(n.h2,{id:"文件发现服务",children:["文件发现服务",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#文件发现服务",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["文件发现服务负责在项目中查找与当前上下文相关的文件。它由 ",(0,s.jsx)(n.code,{children:"@"})," 命令和其他需要访问文件的工具使用。"]}),"\n",(0,s.jsxs)(n.h2,{id:"内存发现服务",children:["内存发现服务",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#内存发现服务",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["内存发现服务负责查找和加载提供模型上下文的 ",(0,s.jsx)(n.code,{children:"VE.md"})," 文件。它以分层方式搜索这些文件，从当前工作目录开始，向上移动到项目根目录和用户的主目录。它还会在子目录中搜索。"]}),"\n",(0,s.jsx)(n.p,{children:"这允许您拥有全局、项目级别和组件级别的上下文文件，所有这些文件都组合在一起，为模型提供最相关的信息。"}),"\n",(0,s.jsxs)(n.p,{children:["您可以使用 ",(0,s.jsxs)(n.a,{href:"/zh/cli/commands",children:[(0,s.jsx)(n.code,{children:"/memory"})," 命令"]})," 来 ",(0,s.jsx)(n.code,{children:"show"}),"、",(0,s.jsx)(n.code,{children:"add"})," 和 ",(0,s.jsx)(n.code,{children:"refresh"})," 已加载的 ",(0,s.jsx)(n.code,{children:"VE.md"})," 文件的内容。"]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}let c=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["zh%2Fcore%2Findex.md"]={toc:[{text:"导航此部分",id:"导航此部分",depth:2},{text:"核心的作用",id:"核心的作用",depth:2},{text:"安全注意事项",id:"安全注意事项",depth:2},{text:"聊天历史压缩",id:"聊天历史压缩",depth:2},{text:"模型回退",id:"模型回退",depth:2},{text:"文件发现服务",id:"文件发现服务",depth:2},{text:"内存发现服务",id:"内存发现服务",depth:2}],title:"VeCLI 核心",headingTitle:"VeCLI 核心",frontmatter:{}}}}]);