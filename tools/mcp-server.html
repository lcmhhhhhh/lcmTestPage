<!doctype html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Rspress v1.45.3">
    <title data-rh="true">使用 VeCLI 的 MCP 服务器 - VeCLI</title><meta data-rh="true" name="description" content="VeCLI - 火山引擎AI命令行工具文档"/>
  <script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script><script defer src="/static/js/styles.85a0ab23.js"></script><script defer src="/static/js/lib-react.f6e61177.js"></script><script defer src="/static/js/lib-router.d48d8961.js"></script><script defer src="/static/js/7162.1122a968.js"></script><script defer src="/static/js/index.f7ba5bf1.js"></script><link href="/static/css/styles.e45a8283.css" rel="stylesheet"></head>

  <body >
    <div id="root"><div class="navContainer_d18b1 rspress-nav px-6  sticky_ddfa7"><div class="container_e4235 flex justify-between items-center h-full"><div class="navBarTitle_c5f07"><a href="/index" class="link_a7cea flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><div class="mr-1 min-w-8"><img src="/logo.jpeg" alt="logo" id="logo" class="rspress-logo"/></div><span>VeCLI</span></a></div><div class="flex flex-1 justify-end items-center"><div class="rightNav_a2fea"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_df1fb"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9"></path></svg><p class="searchWord_af2c1">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_d85a9"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a href="/introduction" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">介绍</div></a><a href="/cli/index" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">CLI</div></a><a href="/core/index" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">核心</div></a><a href="/tools/index" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154 activeItem_a28b5 text-sm font-medium mx-1.5 px-3 py-2 flex items-center">工具</div></a></div><div class="flex-center flex-row"><div class="translation menu-item_b8238 flex text-sm font-bold items-center px-3 py-2"><div><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.7 14.7 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.5 16.5 0 0 0 3 5.58A16.8 16.8 0 0 1 3 18l.75 1.86A18.5 18.5 0 0 0 9.53 16a16.9 16.9 0 0 0 5.76 3.84L16 18a14.5 14.5 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a href="/en/tools/mcp-server" class="link_a7cea "><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>English</span></div></div></a></div></div><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">简体中文</span></div></div></div></div></div></div></div><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6m0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4M12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1M12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1M5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3M19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3M3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1M23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1M4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3M18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5s.2.8-.1 1.1c-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2M9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2"></path></svg></div></div></div></div></div><div class="mobileNavMenu_e7045"><div class="navScreen_ec30c  rspress-nav-screen" id="navScreen"><div class="container_c935d"><div class="navMenu_b887b"><div class="navMenuItem_e7978 w-full"><a href="/introduction" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">介绍</div></a></div><div class="navMenuItem_e7978 w-full"><a href="/cli/index" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">CLI</div></a></div><div class="navMenuItem_e7978 w-full"><a href="/core/index" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">核心</div></a></div><div class="navMenuItem_e7978 w-full"><a href="/tools/index" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154 activeItem_a28b5 text-sm font-medium mx-1.5 px-3 py-2 flex items-center">工具</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_bf893 flex justify-center"></div><div class="flex text-sm font-bold justify-center"><div class="mx-1.5 my-1"><div class=" navScreenMenuGroup_e771d relative"><button class="button_ea41e"><span class="buttonSpan_f4b8f"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.7 14.7 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.5 16.5 0 0 0 3 5.58A16.8 16.8 0 0 1 3 18l.75 1.86A18.5 18.5 0 0 0 9.53 16a16.9 16.9 0 0 0 5.76 3.84L16 18a14.5 14.5 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_f631a "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_dd149"><div><div class="py-1 font-medium"><a href="/en/tools/mcp-server" class="link_a7cea "><div><div class="flex justify-center"><span>English</span></div></div></a></div></div><div><div class="p-1 text-center"><span class="text-brand">简体中文</span></div></div></div></div></div></div></div></div></div></div><button aria-label="mobile hamburger" class=" rspress-mobile-hamburger navHamburger_ac64c text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_af141 pt-0"><aside class="sidebar_dd719 rspress-sidebar "><div class="navTitleMask_fb17c"><div class="navBarTitle_c5f07"><a href="/index" class="link_a7cea flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><div class="mr-1 min-w-8"><img src="/logo.jpeg" alt="logo" id="logo" class="rspress-logo"/></div><span>VeCLI</span></a></div></div><div class="rspress-scrollbar sidebarContent_da296"><nav class="pb-2"><section class="rspress-sidebar-section mt-0.5 block" style="margin-left:0"><div class="rspress-sidebar-collapse flex justify-between items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center" style="font-size:14px">快速开始</span></h2><div class="collapseContainer_d6e4e p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/introduction" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>介绍</span></div></a></div><div class="rspress-sidebar-item"><a href="/deployment" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>部署</span></div></a></div></div></div></section><section class="rspress-sidebar-section mt-0.5 block" style="margin-left:0"><div class="rspress-sidebar-collapse flex justify-between items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center" style="font-size:14px">CLI 使用</span></h2><div class="collapseContainer_d6e4e p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/cli/index" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>CLI 介绍</span></div></a></div><div class="rspress-sidebar-item"><a href="/cli/commands" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>命令</span></div></a></div><div class="rspress-sidebar-item"><a href="/cli/configuration" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>配置</span></div></a></div><div class="rspress-sidebar-item"><a href="/cli/authentication" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>认证</span></div></a></div><div class="rspress-sidebar-item"><a href="/cli/themes" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>主题</span></div></a></div><div class="rspress-sidebar-item"><a href="/cli/tutorials" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>教程</span></div></a></div></div></div></section><section class="rspress-sidebar-section mt-0.5 block" style="margin-left:0"><div class="rspress-sidebar-collapse flex justify-between items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center" style="font-size:14px">核心详情</span></h2><div class="collapseContainer_d6e4e p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/core/index" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>核心介绍</span></div></a></div><div class="rspress-sidebar-item"><a href="/core/tools-api" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>工具 API</span></div></a></div><div class="rspress-sidebar-item"><a href="/core/memport" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Memport</span></div></a></div></div></div></section><section class="rspress-sidebar-section mt-0.5 block" style="margin-left:0"><div class="rspress-sidebar-collapse flex justify-between items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center" style="font-size:14px">工具</span></h2><div class="collapseContainer_d6e4e p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/tools/index" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>工具概览</span></div></a></div><div class="rspress-sidebar-item"><a href="/tools/file-system" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>文件系统</span></div></a></div><div class="rspress-sidebar-item"><a href="/tools/multi-file" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>多文件</span></div></a></div><div class="rspress-sidebar-item"><a href="/tools/shell" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Shell</span></div></a></div><div class="rspress-sidebar-item"><a href="/tools/web-fetch" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Web 抓取</span></div></a></div><div class="rspress-sidebar-item"><a href="/tools/memory" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>内存</span></div></a></div><div class="rspress-sidebar-item"><a href="/tools/mcp-server" class="link_a7cea menuLink_bb039"><div class="menuItemActive_de63c mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>MCP 服务器</span></div></a></div></div></div></section><section class="rspress-sidebar-section mt-0.5 block" style="margin-left:0"><div class="rspress-sidebar-collapse flex justify-between items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center" style="font-size:14px">最佳实践</span></h2><div class="collapseContainer_d6e4e p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/examples/vecli-12306" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>12306订票工具通过火山引擎vefaas部署</span></div></a></div></div></div></section><section class="rspress-sidebar-section mt-0.5 block" style="margin-left:0"><div class="rspress-sidebar-collapse flex justify-between items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center" style="font-size:14px">其他资源</span></h2><div class="collapseContainer_d6e4e p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/checkpointing" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>检查点</span></div></a></div><div class="rspress-sidebar-item"><a href="/ide-integration" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>IDE 集成</span></div></a></div><div class="rspress-sidebar-item"><a href="/telemetry" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>遥测</span></div></a></div><div class="rspress-sidebar-item"><a href="/npm" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>NPM</span></div></a></div><div class="rspress-sidebar-item"><a href="/troubleshooting" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>故障排除</span></div></a></div><div class="rspress-sidebar-item"><a href="/releases" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>发布</span></div></a></div></div></div></section></nav></div></aside><div class="flex-1 relative min-w-0"><div class="rspress-sidebar-menu-container "><div class="rspress-sidebar-menu"><button type="button" class="flex-center mr-auto"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button><button type="button" class="flex-center ml-auto"><span class="text-sm">ON THIS PAGE</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button><div class="rspress-local-toc-container "><ul><li><a href="#什么是-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">什么是 MCP 服务器？</span></a></li><li><a href="#核心集成架构" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">核心集成架构</span></a></li><li><a href="#发现阶段-mcp-clientts" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">发现阶段 (<code>mcp-client.ts</code>)</span></a></li><li><a href="#执行层-mcp-toolts" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">执行层 (<code>mcp-tool.ts</code>)</span></a></li><li><a href="#传输机制" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">传输机制</span></a></li><li><a href="#如何设置您的-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">如何设置您的 MCP 服务器</span></a></li><li><a href="#在-settingsjson-中配置-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">在 settings.json 中配置 MCP 服务器</span></a></li><li><a href="#全局-mcp-设置-mcp" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">全局 MCP 设置 (<code>mcp</code>)</span></a></li><li><a href="#服务器特定配置-mcpservers" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">服务器特定配置 (<code>mcpServers</code>)</span></a></li><li><a href="#配置结构" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">配置结构</span></a></li><li><a href="#配置属性" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">配置属性</span></a></li><li><a href="#必需以下之一" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">必需（以下之一）</span></a></li><li><a href="#可选" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">可选</span></a></li><li><a href="#远程-mcp-服务器的-oauth-支持" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">远程 MCP 服务器的 OAuth 支持</span></a></li><li><a href="#自动-oauth-发现" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">自动 OAuth 发现</span></a></li><li><a href="#身份验证流" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">身份验证流</span></a></li><li><a href="#浏览器重定向要求" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">浏览器重定向要求</span></a></li><li><a href="#管理-oauth-身份验证" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">管理 OAuth 身份验证</span></a></li><li><a href="#oauth-配置属性" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">OAuth 配置属性</span></a></li><li><a href="#令牌管理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">令牌管理</span></a></li><li><a href="#身份验证提供者类型" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">身份验证提供者类型</span></a></li><li><a href="#示例配置" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">示例配置</span></a></li><li><a href="#python-mcp-服务器-stdio" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Python MCP 服务器 (Stdio)</span></a></li><li><a href="#nodejs-mcp-服务器-stdio" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Node.js MCP 服务器 (Stdio)</span></a></li><li><a href="#基于-docker-的-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">基于 Docker 的 MCP 服务器</span></a></li><li><a href="#基于-http-的-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">基于 HTTP 的 MCP 服务器</span></a></li><li><a href="#带有自定义标头的基于-http-的-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">带有自定义标头的基于 HTTP 的 MCP 服务器</span></a></li><li><a href="#带有工具过滤的-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">带有工具过滤的 MCP 服务器</span></a></li><li><a href="#发现阶段深入" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">发现阶段深入</span></a></li><li><a href="#1-服务器迭代和连接" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">1. 服务器迭代和连接</span></a></li><li><a href="#2-工具发现" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">2. 工具发现</span></a></li><li><a href="#3-冲突解决" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">3. 冲突解决</span></a></li><li><a href="#4-模式处理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">4. 模式处理</span></a></li><li><a href="#5-连接管理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">5. 连接管理</span></a></li><li><a href="#工具执行流程" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">工具执行流程</span></a></li><li><a href="#1-工具调用" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">1. 工具调用</span></a></li><li><a href="#2-确认过程" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">2. 确认过程</span></a></li><li><a href="#基于信任的绕过" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">基于信任的绕过</span></a></li><li><a href="#动态允许列表" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">动态允许列表</span></a></li><li><a href="#用户选择处理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">用户选择处理</span></a></li><li><a href="#3-执行" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">3. 执行</span></a></li><li><a href="#4-响应处理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">4. 响应处理</span></a></li><li><a href="#如何与您的-mcp-服务器交互" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">如何与您的 MCP 服务器交互</span></a></li><li><a href="#使用-mcp-命令" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">使用 <code>/mcp</code> 命令</span></a></li><li><a href="#示例-mcp-输出" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">示例 <code>/mcp</code> 输出</span></a></li><li><a href="#工具使用" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">工具使用</span></a></li><li><a href="#状态监控和故障排除" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">状态监控和故障排除</span></a></li><li><a href="#连接状态" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">连接状态</span></a></li><li><a href="#服务器状态-mcpserverstatus" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">服务器状态 (<code>MCPServerStatus</code>)</span></a></li><li><a href="#发现状态-mcpdiscoverystate" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">发现状态 (<code>MCPDiscoveryState</code>)</span></a></li><li><a href="#常见问题和解决方案" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">常见问题和解决方案</span></a></li><li><a href="#服务器无法连接" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">服务器无法连接</span></a></li><li><a href="#未发现工具" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">未发现工具</span></a></li><li><a href="#工具无法执行" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">工具无法执行</span></a></li><li><a href="#沙盒兼容性" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">沙盒兼容性</span></a></li><li><a href="#调试技巧" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">调试技巧</span></a></li><li><a href="#重要说明" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">重要说明</span></a></li><li><a href="#安全注意事项" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">安全注意事项</span></a></li><li><a href="#性能和资源管理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">性能和资源管理</span></a></li><li><a href="#模式兼容性" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">模式兼容性</span></a></li><li><a href="#从工具返回富内容" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">从工具返回富内容</span></a></li><li><a href="#工作原理" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">工作原理</span></a></li><li><a href="#示例返回文本和图像" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">示例：返回文本和图像</span></a></li><li><a href="#作为斜杠命令的-mcp-提示" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">作为斜杠命令的 MCP 提示</span></a></li><li><a href="#在服务器上定义提示" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">在服务器上定义提示</span></a></li><li><a href="#调用提示" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">调用提示</span></a></li><li><a href="#使用-vecli-mcp-管理-mcp-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">使用 <code>vecli mcp</code> 管理 MCP 服务器</span></a></li><li><a href="#添加服务器-vecli-mcp-add" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">添加服务器 (<code>vecli mcp add</code>)</span></a></li><li><a href="#添加一个-stdio-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">添加一个 stdio 服务器</span></a></li><li><a href="#添加一个-http-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">添加一个 HTTP 服务器</span></a></li><li><a href="#添加一个-sse-服务器" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">添加一个 SSE 服务器</span></a></li><li><a href="#列出服务器-vecli-mcp-list" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">列出服务器 (<code>vecli mcp list</code>)</span></a></li><li><a href="#删除服务器-vecli-mcp-remove" class="link_a7cea rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">删除服务器 (<code>vecli mcp remove</code>)</span></a></li></ul></div></div></div><div class="content_ff766 rspress-doc-container flex"><div class="flex-1 overflow-x-auto"><div class="rspress-doc"><!--$--><h1 id="使用-vecli-的-mcp-服务器" class="rspress-doc-title text-3xl mb-10 leading-10 tracking-tight title_fb7eb">使用 VeCLI 的 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#使用-vecli-的-mcp-服务器">#</a></h1>
<p class="my-4 leading-7">本文档提供了在 VeCLI 中配置和使用模型上下文协议 (MCP) 服务器的指南。</p>
<h2 id="什么是-mcp-服务器" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">什么是 MCP 服务器？<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#什么是-mcp-服务器">#</a></h2>
<p class="my-4 leading-7">MCP 服务器是一个通过模型上下文协议向 VeCLI 公开工具和资源的应用程序，使其能够与外部系统和数据源交互。MCP 服务器充当 Vecli 模型与您的本地环境或其他服务（如 API）之间的桥梁。</p>
<p class="my-4 leading-7">MCP 服务器使 VeCLI 能够：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">发现工具：</strong> 通过标准化的模式定义列出可用的工具、其描述和参数。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">执行工具：</strong> 使用定义的参数调用特定工具并接收结构化响应。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">访问资源：</strong> 从特定资源读取数据（尽管 VeCLI 主要专注于工具执行）。</li>
</ul>
<p class="my-4 leading-7">通过 MCP 服务器，您可以扩展 VeCLI 的功能，使其能够执行超出其内置功能的操作，例如与数据库、API、自定义脚本或专用工作流交互。</p>
<h2 id="核心集成架构" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">核心集成架构<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#核心集成架构">#</a></h2>
<p class="my-4 leading-7">VeCLI 通过内置在核心包 (<code>packages/core/src/tools/</code>) 中的复杂发现和执行系统与 MCP 服务器集成：</p>
<h3 id="发现阶段-mcp-clientts" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">发现阶段 (<code>mcp-client.ts</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#发现阶段-mcp-clientts">#</a></h3>
<p class="my-4 leading-7">发现过程由 <code>discoverMcpTools()</code> 编排，该过程：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">遍历配置的服务器</strong> 从您的 <code>settings.json</code> <code>mcpServers</code> 配置中</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">建立连接</strong> 使用适当的传输机制（Stdio、SSE 或可流式 HTTP）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">获取工具定义</strong> 使用 MCP 协议从每个服务器获取</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">清理和验证</strong> 工具模式以确保与 Vecli API 兼容</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">注册工具</strong> 在全局工具注册表中，并解决冲突</li>
</ol>
<h3 id="执行层-mcp-toolts" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">执行层 (<code>mcp-tool.ts</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#执行层-mcp-toolts">#</a></h3>
<p class="my-4 leading-7">每个发现的 MCP 工具都包装在 <code>DiscoveredMCPTool</code> 实例中，该实例：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">处理确认逻辑</strong> 基于服务器信任设置和用户偏好</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">管理工具执行</strong> 通过使用正确的参数调用 MCP 服务器</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">处理响应</strong> 用于 LLM 上下文和用户显示</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">维护连接状态</strong> 并处理超时</li>
</ul>
<h3 id="传输机制" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">传输机制<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#传输机制">#</a></h3>
<p class="my-4 leading-7">VeCLI 支持三种 MCP 传输类型：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">Stdio 传输：</strong> 生成子进程并通过 stdin/stdout 通信</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">SSE 传输：</strong> 连接到服务器发送事件端点</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">可流式 HTTP 传输：</strong> 使用 HTTP 流进行通信</li>
</ul>
<h2 id="如何设置您的-mcp-服务器" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">如何设置您的 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#如何设置您的-mcp-服务器">#</a></h2>
<p class="my-4 leading-7">VeCLI 使用 <code>settings.json</code> 文件中的 <code>mcpServers</code> 配置来定位和连接到 MCP 服务器。此配置支持具有不同传输机制的多个服务器。</p>
<h3 id="在-settingsjson-中配置-mcp-服务器" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">在 settings.json 中配置 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#在-settingsjson-中配置-mcp-服务器">#</a></h3>
<p class="my-4 leading-7">您可以在 <code>settings.json</code> 文件中以两种主要方式配置 MCP 服务器：通过顶层 <code>mcpServers</code> 对象进行特定服务器定义，以及通过 <code>mcp</code> 对象进行控制服务器发现和执行的全局设置。</p>
<h4 id="全局-mcp-设置-mcp" class="mt-8 leading-6 text-lg title_fb7eb">全局 MCP 设置 (<code>mcp</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#全局-mcp-设置-mcp">#</a></h4>
<p class="my-4 leading-7"><code>settings.json</code> 中的 <code>mcp</code> 对象允许您为所有 MCP 服务器定义全局规则。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>mcp.serverCommand</code></strong> (字符串): 启动 MCP 服务器的全局命令。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>mcp.allowed</code></strong> (字符串数组): 要允许的 MCP 服务器名称列表。如果设置了此项，则只会连接到此列表中的服务器（与 <code>mcpServers</code> 对象中的键匹配）。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>mcp.excluded</code></strong> (字符串数组): 要排除的 MCP 服务器名称列表。此列表中的服务器将不会被连接。</li>
</ul>
<p class="my-4 leading-7"><strong class="font-semibold">示例：</strong></p>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcp&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;allowed&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;my-trusted-server&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;excluded&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;experimental-server&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="服务器特定配置-mcpservers" class="mt-8 leading-6 text-lg title_fb7eb">服务器特定配置 (<code>mcpServers</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#服务器特定配置-mcpservers">#</a></h4>
<p class="my-4 leading-7"><code>mcpServers</code> 对象是您定义希望 CLI 连接的每个单独 MCP 服务器的地方。</p>
<h3 id="配置结构" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">配置结构<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#配置结构">#</a></h3>
<p class="my-4 leading-7">将 <code>mcpServers</code> 对象添加到您的 <code>settings.json</code> 文件中：</p>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span> ...文件包含其他配置对象
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;serverName&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;command&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;path/to/server&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;args&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;--arg1&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;value1&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;env&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;API_KEY&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;$MY_API_TOKEN&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;cwd&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;./server-directory&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;timeout&quot;</span><span class="token operator">:</span><span> </span><span class="token number">30000</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;trust&quot;</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h3 id="配置属性" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">配置属性<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#配置属性">#</a></h3>
<p class="my-4 leading-7">每个服务器配置支持以下属性：</p>
<h4 id="必需以下之一" class="mt-8 leading-6 text-lg title_fb7eb">必需（以下之一）<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#必需以下之一">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>command</code></strong> (字符串): Stdio 传输的可执行文件路径</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>url</code></strong> (字符串): SSE 端点 URL（例如，<code>&quot;http://localhost:8080/sse&quot;</code>）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>httpUrl</code></strong> (字符串): HTTP 流端点 URL</li>
</ul>
<h4 id="可选" class="mt-8 leading-6 text-lg title_fb7eb">可选<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#可选">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>args</code></strong> (字符串[]): Stdio 传输的命令行参数</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>headers</code></strong> (对象): 使用 <code>url</code> 或 <code>httpUrl</code> 时的自定义 HTTP 标头</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>env</code></strong> (对象): 服务器进程的环境变量。值可以使用 <code>$VAR_NAME</code> 或 <code>${VAR_NAME}</code> 语法引用环境变量</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>cwd</code></strong> (字符串): Stdio 传输的工作目录</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>timeout</code></strong> (数字): 请求超时时间（毫秒）（默认值：600,000ms = 10 分钟）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>trust</code></strong> (布尔值): 当为 <code>true</code> 时，绕过此服务器的所有工具调用确认（默认值：<code>false</code>）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>includeTools</code></strong> (字符串[]): 要从此 MCP 服务器包含的工具名称列表。指定时，仅此处列出的工具将从此服务器可用（允许列表行为）。如果未指定，则默认启用服务器中的所有工具。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>excludeTools</code></strong> (字符串[]): 要从此 MCP 服务器排除的工具名称列表。此处列出的工具将不可用于模型，即使服务器公开了它们。<strong class="font-semibold">注意：</strong> <code>excludeTools</code> 优先于 <code>includeTools</code> - 如果一个工具在两个列表中，则会被排除。</li>
</ul>
<h3 id="远程-mcp-服务器的-oauth-支持" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">远程 MCP 服务器的 OAuth 支持<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#远程-mcp-服务器的-oauth-支持">#</a></h3>
<p class="my-4 leading-7">VeCLI 支持使用 SSE 或 HTTP 传输对需要身份验证的远程 MCP 服务器进行 OAuth 2.0 身份验证。这可以安全地访问需要身份验证的 MCP 服务器。</p>
<h4 id="自动-oauth-发现" class="mt-8 leading-6 text-lg title_fb7eb">自动 OAuth 发现<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#自动-oauth-发现">#</a></h4>
<p class="my-4 leading-7">对于支持 OAuth 发现的服务器，您可以省略 OAuth 配置，让 CLI 自动发现它：</p>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;discoveredServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;url&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;https://api.example.com/sse&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">CLI 将自动：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">检测服务器何时需要 OAuth 身份验证（401 响应）</li>
<li class="[&amp;:not(:first-child)]:mt-2">从服务器元数据发现 OAuth 端点</li>
<li class="[&amp;:not(:first-child)]:mt-2">如果支持，执行动态客户端注册</li>
<li class="[&amp;:not(:first-child)]:mt-2">处理 OAuth 流和令牌管理</li>
</ul>
<h4 id="身份验证流" class="mt-8 leading-6 text-lg title_fb7eb">身份验证流<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#身份验证流">#</a></h4>
<p class="my-4 leading-7">连接到启用了 OAuth 的服务器时：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">初始连接尝试</strong> 失败，返回 401 未授权</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">OAuth 发现</strong> 找到授权和令牌端点</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">浏览器打开</strong> 用于用户身份验证（需要本地浏览器访问）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">授权码</strong> 兑换为访问令牌</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">令牌安全存储</strong> 以供将来使用</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">连接重试</strong> 使用有效令牌成功</li>
</ol>
<h4 id="浏览器重定向要求" class="mt-8 leading-6 text-lg title_fb7eb">浏览器重定向要求<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#浏览器重定向要求">#</a></h4>
<p class="my-4 leading-7"><strong class="font-semibold">重要：</strong> OAuth 身份验证要求您的本地机器能够：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">打开 Web 浏览器进行身份验证</li>
<li class="[&amp;:not(:first-child)]:mt-2">在 <code>http://localhost:7777/oauth/callback</code> 上接收重定向</li>
</ul>
<p class="my-4 leading-7">此功能在以下环境中无法工作：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">没有浏览器访问权限的无头环境</li>
<li class="[&amp;:not(:first-child)]:mt-2">没有 X11 转发的远程 SSH 会话</li>
<li class="[&amp;:not(:first-child)]:mt-2">没有浏览器支持的容器化环境</li>
</ul>
<h4 id="管理-oauth-身份验证" class="mt-8 leading-6 text-lg title_fb7eb">管理 OAuth 身份验证<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#管理-oauth-身份验证">#</a></h4>
<p class="my-4 leading-7">使用 <code>/mcp auth</code> 命令管理 OAuth 身份验证：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 列出需要身份验证的服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem">/mcp auth
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 使用特定服务器进行身份验证</span><span>
</span></span><span style="display:block;padding:0 1.25rem">/mcp auth serverName
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 如果令牌过期则重新进行身份验证</span><span>
</span></span><span style="display:block;padding:0 1.25rem">/mcp auth serverName</span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="oauth-配置属性" class="mt-8 leading-6 text-lg title_fb7eb">OAuth 配置属性<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#oauth-配置属性">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>enabled</code></strong> (布尔值): 为此服务器启用 OAuth</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>clientId</code></strong> (字符串): OAuth 客户端标识符（可选，使用动态注册时）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>clientSecret</code></strong> (字符串): OAuth 客户端密钥（可选，用于公共客户端）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>authorizationUrl</code></strong> (字符串): OAuth 授权端点（如果省略则自动发现）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>tokenUrl</code></strong> (字符串): OAuth 令牌端点（如果省略则自动发现）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>scopes</code></strong> (字符串[]): 所需的 OAuth 范围</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>redirectUri</code></strong> (字符串): 自定义重定向 URI（默认为 <code>http://localhost:7777/oauth/callback</code>）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>tokenParamName</code></strong> (字符串): SSE URL 中令牌的查询参数名称</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>audiences</code></strong> (字符串[]): 令牌有效的受众</li>
</ul>
<h4 id="令牌管理" class="mt-8 leading-6 text-lg title_fb7eb">令牌管理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#令牌管理">#</a></h4>
<p class="my-4 leading-7">OAuth 令牌会自动：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">安全存储</strong> 在 <code>~/.ve/mcp-oauth-tokens.json</code> 中</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">刷新</strong> 当过期时（如果有刷新令牌可用）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">验证</strong> 在每次连接尝试之前</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">清理</strong> 当无效或过期时</li>
</ul>
<h4 id="身份验证提供者类型" class="mt-8 leading-6 text-lg title_fb7eb">身份验证提供者类型<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#身份验证提供者类型">#</a></h4>
<p class="my-4 leading-7">您可以使用 <code>authProviderType</code> 属性指定身份验证提供者类型：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>authProviderType</code></strong> (字符串): 指定身份验证提供者。可以是以下之一：<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>dynamic_discovery</code></strong> (默认): CLI 将自动从服务器发现 OAuth 配置。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>volcengine_credentials</code></strong>: CLI 将使用 Volcengine 应用默认凭据 (ADC) 对服务器进行身份验证。使用此提供者时，您必须指定所需的范围。</li>
</ul>
</li>
</ul>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;volcengineServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;httpUrl&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;https://my-gcp-service.run.app/mcp&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;authProviderType&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;volcengine_credentials&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;oauth&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;scopes&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;https://www.volcengineapis.com/auth/userinfo.email&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h3 id="示例配置" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">示例配置<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#示例配置">#</a></h3>
<h4 id="python-mcp-服务器-stdio" class="mt-8 leading-6 text-lg title_fb7eb">Python MCP 服务器 (Stdio)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#python-mcp-服务器-stdio">#</a></h4>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;pythonTools&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;command&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;python&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;args&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;-m&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;my_mcp_server&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;--port&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;8080&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;cwd&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;./mcp-servers/python&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;env&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;DATABASE_URL&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;$DB_CONNECTION_STRING&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;API_KEY&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;${EXTERNAL_API_KEY}&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;timeout&quot;</span><span class="token operator">:</span><span> </span><span class="token number">15000</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="nodejs-mcp-服务器-stdio" class="mt-8 leading-6 text-lg title_fb7eb">Node.js MCP 服务器 (Stdio)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#nodejs-mcp-服务器-stdio">#</a></h4>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;nodeServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;command&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;node&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;args&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;dist/server.js&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;--verbose&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;cwd&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;./mcp-servers/node&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;trust&quot;</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="基于-docker-的-mcp-服务器" class="mt-8 leading-6 text-lg title_fb7eb">基于 Docker 的 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#基于-docker-的-mcp-服务器">#</a></h4>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;dockerizedServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;command&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;docker&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;args&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;run&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;-i&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;--rm&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;-e&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;API_KEY&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;-v&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;${PWD}:/workspace&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&quot;my-mcp-server:latest&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;env&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;API_KEY&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;$EXTERNAL_SERVICE_TOKEN&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="基于-http-的-mcp-服务器" class="mt-8 leading-6 text-lg title_fb7eb">基于 HTTP 的 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#基于-http-的-mcp-服务器">#</a></h4>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;httpServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;httpUrl&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;http://localhost:3000/mcp&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;timeout&quot;</span><span class="token operator">:</span><span> </span><span class="token number">5000</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="带有自定义标头的基于-http-的-mcp-服务器" class="mt-8 leading-6 text-lg title_fb7eb">带有自定义标头的基于 HTTP 的 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#带有自定义标头的基于-http-的-mcp-服务器">#</a></h4>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;httpServerWithAuth&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;httpUrl&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;http://localhost:3000/mcp&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;headers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;Authorization&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;Bearer your-api-token&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;X-Custom-Header&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;custom-value&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-parameter)">&quot;Content-Type&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;application/json&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;timeout&quot;</span><span class="token operator">:</span><span> </span><span class="token number">5000</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="带有工具过滤的-mcp-服务器" class="mt-8 leading-6 text-lg title_fb7eb">带有工具过滤的 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#带有工具过滤的-mcp-服务器">#</a></h4>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;filteredServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;command&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;python&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;args&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;-m&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;my_mcp_server&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;includeTools&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;safe_tool&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;file_reader&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;data_processor&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// &quot;excludeTools&quot;: [&quot;dangerous_tool&quot;, &quot;file_deleter&quot;],</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;timeout&quot;</span><span class="token operator">:</span><span> </span><span class="token number">30000</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 id="发现阶段深入" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">发现阶段深入<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#发现阶段深入">#</a></h2>
<p class="my-4 leading-7">当 VeCLI 启动时，它通过以下详细过程执行 MCP 服务器发现：</p>
<h3 id="1-服务器迭代和连接" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">1. 服务器迭代和连接<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#1-服务器迭代和连接">#</a></h3>
<p class="my-4 leading-7">对于 <code>mcpServers</code> 中配置的每个服务器：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">状态跟踪开始：</strong> 服务器状态设置为 <code>CONNECTING</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">传输选择：</strong> 基于配置属性：<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>httpUrl</code> → <code>StreamableHTTPClientTransport</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>url</code> → <code>SSEClientTransport</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>command</code> → <code>StdioClientTransport</code></li>
</ul>
</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">连接建立：</strong> MCP 客户端尝试使用配置的超时连接</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">错误处理：</strong> 连接失败会被记录，服务器状态设置为 <code>DISCONNECTED</code></li>
</ol>
<h3 id="2-工具发现" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">2. 工具发现<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#2-工具发现">#</a></h3>
<p class="my-4 leading-7">连接成功后：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">工具列表：</strong> 客户端调用 MCP 服务器的工具列表端点</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">模式验证：</strong> 验证每个工具的函数声明</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">工具过滤：</strong> 根据 <code>includeTools</code> 和 <code>excludeTools</code> 配置过滤工具</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">名称清理：</strong> 工具名称被清理以满足 Vecli API 要求：<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">无效字符（非字母数字、下划线、点、连字符）被替换为下划线</li>
<li class="[&amp;:not(:first-child)]:mt-2">超过 63 个字符的名称会被截断，并用中间替换 (<code>___</code>)</li>
</ul>
</li>
</ol>
<h3 id="3-冲突解决" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">3. 冲突解决<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#3-冲突解决">#</a></h3>
<p class="my-4 leading-7">当多个服务器公开同名工具时：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">首次注册获胜：</strong> 第一个注册工具名称的服务器获得未加前缀的名称</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">自动加前缀：</strong> 后续服务器获得加前缀的名称：<code>serverName__toolName</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">注册表跟踪：</strong> 工具注册表维护服务器名称与其工具之间的映射</li>
</ol>
<h3 id="4-模式处理" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">4. 模式处理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#4-模式处理">#</a></h3>
<p class="my-4 leading-7">工具参数模式经过清理以确保与 Vecli API 兼容：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>$schema</code> 属性</strong> 被移除</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>additionalProperties</code></strong> 被剥离</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">带有 <code>default</code> 的 <code>anyOf</code></strong> 其默认值被移除（Vertex AI 兼容性）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">递归处理</strong> 应用于嵌套模式</li>
</ul>
<h3 id="5-连接管理" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">5. 连接管理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#5-连接管理">#</a></h3>
<p class="my-4 leading-7">发现后：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">持久连接：</strong> 成功注册工具的服务器保持其连接</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">清理：</strong> 不提供可用工具的服务器的连接会被关闭</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">状态更新：</strong> 最终服务器状态设置为 <code>CONNECTED</code> 或 <code>DISCONNECTED</code></li>
</ul>
<h2 id="工具执行流程" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">工具执行流程<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#工具执行流程">#</a></h2>
<p class="my-4 leading-7">当 Vecli 模型决定使用 MCP 工具时，会发生以下执行流程：</p>
<h3 id="1-工具调用" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">1. 工具调用<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#1-工具调用">#</a></h3>
<p class="my-4 leading-7">模型生成一个 <code>FunctionCall</code>，其中包含：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">工具名称：</strong> 注册的名称（可能加了前缀）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">参数：</strong> 与工具参数模式匹配的 JSON 对象</li>
</ul>
<h3 id="2-确认过程" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">2. 确认过程<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#2-确认过程">#</a></h3>
<p class="my-4 leading-7">每个 <code>DiscoveredMCPTool</code> 实现了复杂的确认逻辑：</p>
<h4 id="基于信任的绕过" class="mt-8 leading-6 text-lg title_fb7eb">基于信任的绕过<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#基于信任的绕过">#</a></h4>
<div class="language-typescript"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-typescript" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">this</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>trust</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// 无需确认</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="动态允许列表" class="mt-8 leading-6 text-lg title_fb7eb">动态允许列表<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#动态允许列表">#</a></h4>
<p class="my-4 leading-7">系统为以下内容维护内部允许列表：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">服务器级别：</strong> <code>serverName</code> → 来自此服务器的所有工具都被信任</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">工具级别：</strong> <code>serverName.toolName</code> → 此特定工具被信任</li>
</ul>
<h4 id="用户选择处理" class="mt-8 leading-6 text-lg title_fb7eb">用户选择处理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#用户选择处理">#</a></h4>
<p class="my-4 leading-7">需要确认时，用户可以选择：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">仅此一次：</strong> 仅执行这一次</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">始终允许此工具：</strong> 添加到工具级别允许列表</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">始终允许此服务器：</strong> 添加到服务器级别允许列表</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">取消：</strong> 中止执行</li>
</ul>
<h3 id="3-执行" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">3. 执行<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#3-执行">#</a></h3>
<p class="my-4 leading-7">确认后（或信任绕过）：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">参数准备：</strong> 参数根据工具的模式进行验证</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">MCP 调用：</strong> 底层 <code>CallableTool</code> 使用以下内容调用服务器：</p>
<div class="language-typescript"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-typescript" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> functionCalls </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-keyword)">this</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>serverToolName</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-comment)">// 原始服务器工具名称</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    args</span><span class="token operator">:</span><span> params</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">响应处理：</strong> 结果被格式化为 LLM 上下文和用户显示</p>
</li>
</ol>
<h3 id="4-响应处理" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">4. 响应处理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#4-响应处理">#</a></h3>
<p class="my-4 leading-7">执行结果包含：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>llmContent</code>：</strong> 用于语言模型上下文的原始响应部分</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>returnDisplay</code>：</strong> 用于用户显示的格式化输出（通常是 JSON 格式的代码块）</li>
</ul>
<h2 id="如何与您的-mcp-服务器交互" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">如何与您的 MCP 服务器交互<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#如何与您的-mcp-服务器交互">#</a></h2>
<h3 id="使用-mcp-命令" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">使用 <code>/mcp</code> 命令<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#使用-mcp-命令">#</a></h3>
<p class="my-4 leading-7"><code>/mcp</code> 命令提供有关 MCP 服务器设置的全面信息：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>/mcp</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">这将显示：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">服务器列表：</strong> 所有配置的 MCP 服务器</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">连接状态：</strong> <code>CONNECTED</code>、<code>CONNECTING</code> 或 <code>DISCONNECTED</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">服务器详细信息：</strong> 配置摘要（不包括敏感数据）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">可用工具：</strong> 每个服务器的工具列表及其描述</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">发现状态：</strong> 整体发现过程状态</li>
</ul>
<h3 id="示例-mcp-输出" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">示例 <code>/mcp</code> 输出<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#示例-mcp-输出">#</a></h3>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>MCP 服务器状态:

📡 pythonTools (已连接)
  命令: python -m my_mcp_server --port 8080
  工作目录: ./mcp-servers/python
  超时: 15000ms
  工具: calculate_sum, file_analyzer, data_processor

🔌 nodeServer (已断开)
  命令: node dist/server.js --verbose
  错误: 连接被拒绝

🐳 dockerizedServer (已连接)
  命令: docker run -i --rm -e API_KEY my-mcp-server:latest
  工具: docker__deploy, docker__status

发现状态: 已完成
</code></div></div>
<h3 id="工具使用" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">工具使用<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#工具使用">#</a></h3>
<p class="my-4 leading-7">发现后，MCP 工具对 Vecli 模型来说就像内置工具一样可用。模型将自动：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">选择合适的工具</strong> 基于您的请求</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">显示确认对话框</strong> （除非服务器受信任）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">执行工具</strong> 使用正确的参数</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">以用户友好的格式显示结果</strong></li>
</ol>
<h2 id="状态监控和故障排除" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">状态监控和故障排除<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#状态监控和故障排除">#</a></h2>
<h3 id="连接状态" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">连接状态<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#连接状态">#</a></h3>
<p class="my-4 leading-7">MCP 集成跟踪几种状态：</p>
<h4 id="服务器状态-mcpserverstatus" class="mt-8 leading-6 text-lg title_fb7eb">服务器状态 (<code>MCPServerStatus</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#服务器状态-mcpserverstatus">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>DISCONNECTED</code>:</strong> 服务器未连接或有错误</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>CONNECTING</code>:</strong> 正在进行连接尝试</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>CONNECTED</code>:</strong> 服务器已连接并准备就绪</li>
</ul>
<h4 id="发现状态-mcpdiscoverystate" class="mt-8 leading-6 text-lg title_fb7eb">发现状态 (<code>MCPDiscoveryState</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#发现状态-mcpdiscoverystate">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>NOT_STARTED</code>:</strong> 发现尚未开始</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>IN_PROGRESS</code>:</strong> 当前正在发现服务器</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold"><code>COMPLETED</code>:</strong> 发现已完成（有或没有错误）</li>
</ul>
<h3 id="常见问题和解决方案" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">常见问题和解决方案<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#常见问题和解决方案">#</a></h3>
<h4 id="服务器无法连接" class="mt-8 leading-6 text-lg title_fb7eb">服务器无法连接<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#服务器无法连接">#</a></h4>
<p class="my-4 leading-7"><strong class="font-semibold">症状：</strong> 服务器显示 <code>DISCONNECTED</code> 状态</p>
<p class="my-4 leading-7"><strong class="font-semibold">故障排除：</strong></p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">检查配置：</strong> 验证 <code>command</code>、<code>args</code> 和 <code>cwd</code> 是否正确</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">手动测试：</strong> 直接运行服务器命令以确保其正常工作</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">检查依赖项：</strong> 确保所有必需的包都已安装</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">查看日志：</strong> 在 CLI 输出中查找错误消息</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">验证权限：</strong> 确保 CLI 可以执行服务器命令</li>
</ol>
<h4 id="未发现工具" class="mt-8 leading-6 text-lg title_fb7eb">未发现工具<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#未发现工具">#</a></h4>
<p class="my-4 leading-7"><strong class="font-semibold">症状：</strong> 服务器连接但没有可用的工具</p>
<p class="my-4 leading-7"><strong class="font-semibold">故障排除：</strong></p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">验证工具注册：</strong> 确保您的服务器实际注册了工具</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">检查 MCP 协议：</strong> 确认您的服务器正确实现了 MCP 工具列表</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">查看服务器日志：</strong> 检查 stderr 输出以查找服务器端错误</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">测试工具列表：</strong> 手动测试服务器的工具发现端点</li>
</ol>
<h4 id="工具无法执行" class="mt-8 leading-6 text-lg title_fb7eb">工具无法执行<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#工具无法执行">#</a></h4>
<p class="my-4 leading-7"><strong class="font-semibold">症状：</strong> 工具被发现但在执行期间失败</p>
<p class="my-4 leading-7"><strong class="font-semibold">故障排除：</strong></p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">参数验证：</strong> 确保您的工具接受预期的参数</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">模式兼容性：</strong> 验证您的输入模式是有效的 JSON 模式</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">错误处理：</strong> 检查您的工具是否抛出未处理的异常</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">超时问题：</strong> 考虑增加 <code>timeout</code> 设置</li>
</ol>
<h4 id="沙盒兼容性" class="mt-8 leading-6 text-lg title_fb7eb">沙盒兼容性<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#沙盒兼容性">#</a></h4>
<p class="my-4 leading-7"><strong class="font-semibold">症状：</strong> 启用沙盒时 MCP 服务器失败</p>
<p class="my-4 leading-7"><strong class="font-semibold">解决方案：</strong></p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">基于 Docker 的服务器：</strong> 使用包含所有依赖项的 Docker 容器</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">路径可访问性：</strong> 确保沙盒环境中可以访问服务器可执行文件</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">网络访问：</strong> 配置沙盒以允许必要的网络连接</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">环境变量：</strong> 验证所需的环境变量是否已传递</li>
</ol>
<h3 id="调试技巧" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">调试技巧<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#调试技巧">#</a></h3>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">启用调试模式：</strong> 使用 <code>--debug</code> 运行 CLI 以获取详细输出</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">检查 stderr：</strong> MCP 服务器 stderr 被捕获并记录（INFO 消息被过滤）</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">测试隔离：</strong> 在集成之前独立测试您的 MCP 服务器</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">增量设置：</strong> 在添加复杂功能之前从简单工具开始</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">频繁使用 <code>/mcp</code>：</strong> 在开发过程中监控服务器状态</li>
</ol>
<h2 id="重要说明" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">重要说明<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#重要说明">#</a></h2>
<h3 id="安全注意事项" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">安全注意事项<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#安全注意事项">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">信任设置：</strong> <code>trust</code> 选项绕过所有确认对话框。请谨慎使用，仅用于您完全控制的服务器</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">访问令牌：</strong> 配置包含 API 密钥或令牌的环境变量时要注意安全</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">沙盒兼容性：</strong> 使用沙盒时，确保 MCP 服务器在沙盒环境中可用</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">私人数据：</strong> 使用范围广泛的个人访问令牌可能导致存储库之间的信息泄露</li>
</ul>
<h3 id="性能和资源管理" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">性能和资源管理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#性能和资源管理">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">连接持久性：</strong> CLI 保持与成功注册工具的服务器的持久连接</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">自动清理：</strong> 到不提供工具的服务器的连接会自动关闭</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">超时管理：</strong> 根据服务器的响应特性配置适当的超时</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">资源监控：</strong> MCP 服务器作为单独的进程运行并消耗系统资源</li>
</ul>
<h3 id="模式兼容性" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">模式兼容性<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#模式兼容性">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">属性剥离：</strong> 系统会自动移除某些模式属性（<code>$schema</code>、<code>additionalProperties</code>）以确保与 Vecli API 兼容</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">名称清理：</strong> 工具名称会自动清理以满足 API 要求</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">冲突解决：</strong> 服务器之间的工具名称冲突通过自动加前缀解决</li>
</ul>
<p class="my-4 leading-7">这种全面的集成使 MCP 服务器成为扩展 VeCLI 功能的强大方式，同时保持安全性、可靠性和易用性。</p>
<h2 id="从工具返回富内容" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">从工具返回富内容<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#从工具返回富内容">#</a></h2>
<p class="my-4 leading-7">MCP 工具不仅限于返回简单文本。您可以返回富多部分内容，包括文本、图像、音频和其他二进制数据，作为单个工具响应。这使您能够构建强大的工具，可以在单个回合中向模型提供多样化的信息。</p>
<p class="my-4 leading-7">所有从工具返回的数据都会被处理并作为上下文发送给模型，以供其下一次生成使用，使其能够推理或总结提供的信息。</p>
<h3 id="工作原理" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">工作原理<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#工作原理">#</a></h3>
<p class="my-4 leading-7">要返回富内容，您的工具响应必须遵循 MCP 规范中的 <a href="https://modelcontextprotocol.io/specification/2025-06-18/server/tools#tool-result" target="_blank" rel="noopener noreferrer" class="link_a7cea  link_a9ef4 inline-link_f855c"><code>CallToolResult</code></a>。结果的 <code>content</code> 字段应该是一个 <code>ContentBlock</code> 对象数组。VeCLI 将正确处理此数组，将文本与二进制数据分离并打包给模型。</p>
<p class="my-4 leading-7">您可以在 <code>content</code> 数组中混合和匹配不同的内容块类型。支持的块类型包括：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>text</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>image</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>audio</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>resource</code> (嵌入内容)</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>resource_link</code></li>
</ul>
<h3 id="示例返回文本和图像" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">示例：返回文本和图像<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#示例返回文本和图像">#</a></h3>
<p class="my-4 leading-7">以下是一个有效的 MCP 工具 JSON 响应示例，该响应同时返回文本描述和图像：</p>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;content&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;type&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;text&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;text&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;这是您请求的徽标。&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;type&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;image&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;data&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;BASE64_ENCODED_IMAGE_DATA_HERE&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;mimeType&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;image/png&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;type&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;text&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;text&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;徽标于 2025 年创建。&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">当 VeCLI 收到此响应时，它将：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">提取所有文本并将其组合成一个 <code>functionResponse</code> 部分供模型使用。</li>
<li class="[&amp;:not(:first-child)]:mt-2">将图像数据作为单独的 <code>inlineData</code> 部分呈现。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在 CLI 中提供一个干净、用户友好的摘要，表明已收到文本和图像。</li>
</ol>
<p class="my-4 leading-7">这使您能够构建复杂的工具，向 Vecli 模型提供丰富的多模态上下文。</p>
<h2 id="作为斜杠命令的-mcp-提示" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">作为斜杠命令的 MCP 提示<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#作为斜杠命令的-mcp-提示">#</a></h2>
<p class="my-4 leading-7">除了工具，MCP 服务器还可以公开预定义的提示，这些提示可以在 VeCLI 中作为斜杠命令执行。这使您能够为常见或复杂的查询创建快捷方式，可以通过名称轻松调用。</p>
<h3 id="在服务器上定义提示" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">在服务器上定义提示<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#在服务器上定义提示">#</a></h3>
<p class="my-4 leading-7">以下是一个定义提示的小型 stdio MCP 服务器示例：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> McpServer </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modelcontextprotocol/sdk/server/mcp.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> StdioServerTransport </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modelcontextprotocol/sdk/server/stdio.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> z </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;zod&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> server </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">McpServer</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;prompt-server&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  version</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;1.0.0&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>server</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">registerPrompt</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-string)">&#x27;poem-writer&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    title</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;诗歌作家&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    description</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;写一首优美的俳句&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    argsSchema</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> title</span><span class="token operator">:</span><span> z</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">string</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> mood</span><span class="token operator">:</span><span> z</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">string</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">optional</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> title</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> mood </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    messages</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        role</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;user&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        content</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          type</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;text&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          text</span><span class="token operator">:</span><span> </span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token template-string" style="color:var(--code-token-string)">写一首俳句</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">mood </span><span class="token template-string interpolation operator">?</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation template-punctuation" style="color:var(--code-token-string)">`</span><span class="token template-string interpolation" style="color:var(--code-token-string)">，情绪为 </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">mood</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string interpolation template-punctuation" style="color:var(--code-token-string)">`</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation" style="color:var(--code-token-string)">&#x27;&#x27;</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">，标题为 </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">title</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">。请注意，俳句是 5 个音节，然后是 7 个音节，再然后是 5 个音节 </span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> transport </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">StdioServerTransport</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">await</span><span> server</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">connect</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>transport</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">这可以在 <code>settings.json</code> 中的 <code>mcpServers</code> 下包含：</p>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;mcpServers&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;nodeServer&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;command&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;node&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-parameter)">&quot;args&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;filename.ts&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h3 id="调用提示" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">调用提示<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#调用提示">#</a></h3>
<p class="my-4 leading-7">发现提示后，您可以使用其名称作为斜杠命令来调用它。CLI 将自动处理参数解析。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>/poem-writer --title</span><span class="token operator">=</span><span class="token" style="color:var(--code-token-string)">&quot;VeCLI&quot;</span><span> --mood</span><span class="token operator">=</span><span class="token" style="color:var(--code-token-string)">&quot;reverent&quot;</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">或者，使用位置参数：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>/poem-writer </span><span class="token" style="color:var(--code-token-string)">&quot;VeCLI&quot;</span><span> reverent</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">运行此命令时，VeCLI 在 MCP 服务器上执行 <code>prompts/get</code> 方法并提供参数。服务器负责将参数代入提示模板并返回最终提示文本。CLI 然后将此提示发送给模型执行。这提供了一种方便的方式来自动化和共享常见工作流。</p>
<h2 id="使用-vecli-mcp-管理-mcp-服务器" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_fb7eb">使用 <code>vecli mcp</code> 管理 MCP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#使用-vecli-mcp-管理-mcp-服务器">#</a></h2>
<p class="my-4 leading-7">虽然您总是可以通过手动编辑 <code>settings.json</code> 文件来配置 MCP 服务器，但 VeCLI 提供了一组方便的命令来以编程方式管理您的服务器配置。这些命令简化了添加、列出和删除 MCP 服务器的过程，而无需直接编辑 JSON 文件。</p>
<h3 id="添加服务器-vecli-mcp-add" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">添加服务器 (<code>vecli mcp add</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#添加服务器-vecli-mcp-add">#</a></h3>
<p class="my-4 leading-7"><code>add</code> 命令在您的 <code>settings.json</code> 中配置一个新的 MCP 服务器。根据范围 (<code>-s, --scope</code>)，它将被添加到用户配置 <code>~/.ve/settings.json</code> 或项目配置 <code>.ve/settings.json</code> 文件中。</p>
<p class="my-4 leading-7"><strong class="font-semibold">命令：</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>options</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span> </span><span class="token operator">&lt;</span><span>name</span><span class="token operator">&gt;</span><span> </span><span class="token operator">&lt;</span><span>commandOrUrl</span><span class="token operator">&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>args</span><span class="token" style="color:var(--code-token-punctuation)">..</span><span>.</span><span class="token" style="color:var(--code-token-punctuation)">]</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>&lt;name&gt;</code>: 服务器的唯一名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>&lt;commandOrUrl&gt;</code>: 要执行的命令（用于 <code>stdio</code>）或 URL（用于 <code>http</code>/<code>sse</code>）。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[args...]</code>: <code>stdio</code> 命令的可选参数。</li>
</ul>
<p class="my-4 leading-7"><strong class="font-semibold">选项（标志）：</strong></p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>-s, --scope</code>: 配置范围（用户或项目）。[默认: &quot;project&quot;]</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>-t, --transport</code>: 传输类型（stdio, sse, http）。[默认: &quot;stdio&quot;]</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>-e, --env</code>: 设置环境变量（例如 -e KEY=value）。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>-H, --header</code>: 为 SSE 和 HTTP 传输设置 HTTP 标头（例如 -H &quot;X-Api-Key: abc123&quot; -H &quot;Authorization: Bearer abc123&quot;）。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>--timeout</code>: 设置连接超时时间（毫秒）。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>--trust</code>: 信任服务器（绕过所有工具调用确认提示）。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>--description</code>: 设置服务器的描述。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>--include-tools</code>: 以逗号分隔的要包含的工具列表。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>--exclude-tools</code>: 以逗号分隔的要排除的工具列表。</li>
</ul>
<h4 id="添加一个-stdio-服务器" class="mt-8 leading-6 text-lg title_fb7eb">添加一个 stdio 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#添加一个-stdio-服务器">#</a></h4>
<p class="my-4 leading-7">这是运行本地服务器的默认传输。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 基本语法</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> </span><span class="token operator">&lt;</span><span>name</span><span class="token operator">&gt;</span><span> </span><span class="token operator">&lt;</span><span>command</span><span class="token operator">&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>args</span><span class="token" style="color:var(--code-token-punctuation)">..</span><span>.</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 示例: 添加一个本地服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> my-stdio-server -e </span><span class="token assign-left" style="color:var(--code-token-variable)">API_KEY</span><span class="token operator">=</span><span class="token number">123</span><span> /path/to/server arg1 arg2 arg3
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 示例: 添加一个本地 python 服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> python-server python server.py --port </span><span class="token number">8080</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="添加一个-http-服务器" class="mt-8 leading-6 text-lg title_fb7eb">添加一个 HTTP 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#添加一个-http-服务器">#</a></h4>
<p class="my-4 leading-7">此传输用于使用可流式 HTTP 传输的服务器。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 基本语法</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> --transport http </span><span class="token operator">&lt;</span><span>name</span><span class="token operator">&gt;</span><span> </span><span class="token operator">&lt;</span><span>url</span><span class="token operator">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 示例: 添加一个 HTTP 服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> --transport http http-server https://api.example.com/mcp/
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 示例: 添加一个带有身份验证标头的 HTTP 服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> --transport http secure-http https://api.example.com/mcp/ --header </span><span class="token" style="color:var(--code-token-string)">&quot;Authorization: Bearer abc123&quot;</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h4 id="添加一个-sse-服务器" class="mt-8 leading-6 text-lg title_fb7eb">添加一个 SSE 服务器<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#添加一个-sse-服务器">#</a></h4>
<p class="my-4 leading-7">此传输用于使用服务器发送事件 (SSE) 的服务器。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 基本语法</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> --transport sse </span><span class="token operator">&lt;</span><span>name</span><span class="token operator">&gt;</span><span> </span><span class="token operator">&lt;</span><span>url</span><span class="token operator">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 示例: 添加一个 SSE 服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> --transport sse sse-server https://api.example.com/sse/
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 示例: 添加一个带有身份验证标头的 SSE 服务器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>vecli mcp </span><span class="token" style="color:var(--code-token-function)">add</span><span> --transport sse secure-sse https://api.example.com/sse/ --header </span><span class="token" style="color:var(--code-token-string)">&quot;Authorization: Bearer abc123&quot;</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h3 id="列出服务器-vecli-mcp-list" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">列出服务器 (<code>vecli mcp list</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#列出服务器-vecli-mcp-list">#</a></h3>
<p class="my-4 leading-7">要查看当前配置的所有 MCP 服务器，请使用 <code>list</code> 命令。它显示每个服务器的名称、配置详细信息和连接状态。</p>
<p class="my-4 leading-7"><strong class="font-semibold">命令：</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>vecli mcp list</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7"><strong class="font-semibold">示例输出：</strong></p>
<div class="language-sh"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-sh" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>✓ stdio-server: 命令: python3 server.py (stdio) - 已连接
</span></span><span style="display:block;padding:0 1.25rem">✓ http-server: https://api.example.com/mcp (http) - 已连接
</span><span style="display:block;padding:0 1.25rem">✗ sse-server: https://api.example.com/sse (sse) - 已断开</span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h3 id="删除服务器-vecli-mcp-remove" class="mt-10 mb-2 leading-7 text-xl title_fb7eb">删除服务器 (<code>vecli mcp remove</code>)<a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#删除服务器-vecli-mcp-remove">#</a></h3>
<p class="my-4 leading-7">要从配置中删除服务器，请使用 <code>remove</code> 命令和服务器名称。</p>
<p class="my-4 leading-7"><strong class="font-semibold">命令：</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>vecli mcp remove </span><span class="token operator">&lt;</span><span>name</span><span class="token operator">&gt;</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7"><strong class="font-semibold">示例：</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>vecli mcp remove my-server</span></span></code></pre></div><div class="code-button-group_fb445"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">这将根据范围 (<code>-s, --scope</code>) 在相应的 <code>settings.json</code> 文件中的 <code>mcpServers</code> 对象中查找并删除 &quot;my-server&quot; 条目。</p><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_c92d1 flex flex-col"><a href="/tools/memory" class="link_a7cea pager-link_e0d2d"><span class="desc_dcc01">Previous Page</span><span class="title_a3acb">内存</span></a></div><div class="next_c11be flex flex-col"><a href="/examples/vecli-12306" class="link_a7cea pager-link_e0d2d next_ad355"><span class="desc_dcc01">Next Page</span><span class="title_a3acb">12306订票工具通过火山引擎vefaas部署</span></a></div></div></footer></div></div><div class="aside-container_bc5fa"><div class="flex flex-col"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"><li><a href="#什么是-mcp-服务器" title="什么是 MCP 服务器？" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">什么是 MCP 服务器？</span></a></li><li><a href="#核心集成架构" title="核心集成架构" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">核心集成架构</span></a></li><li><a href="#发现阶段-mcp-clientts" title="发现阶段 (mcp-client.ts)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">发现阶段 (<code>mcp-client.ts</code>)</span></a></li><li><a href="#执行层-mcp-toolts" title="执行层 (mcp-tool.ts)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">执行层 (<code>mcp-tool.ts</code>)</span></a></li><li><a href="#传输机制" title="传输机制" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">传输机制</span></a></li><li><a href="#如何设置您的-mcp-服务器" title="如何设置您的 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">如何设置您的 MCP 服务器</span></a></li><li><a href="#在-settingsjson-中配置-mcp-服务器" title="在 settings.json 中配置 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">在 settings.json 中配置 MCP 服务器</span></a></li><li><a href="#全局-mcp-设置-mcp" title="全局 MCP 设置 (mcp)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">全局 MCP 设置 (<code>mcp</code>)</span></a></li><li><a href="#服务器特定配置-mcpservers" title="服务器特定配置 (mcpServers)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">服务器特定配置 (<code>mcpServers</code>)</span></a></li><li><a href="#配置结构" title="配置结构" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">配置结构</span></a></li><li><a href="#配置属性" title="配置属性" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">配置属性</span></a></li><li><a href="#必需以下之一" title="必需（以下之一）" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">必需（以下之一）</span></a></li><li><a href="#可选" title="可选" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">可选</span></a></li><li><a href="#远程-mcp-服务器的-oauth-支持" title="远程 MCP 服务器的 OAuth 支持" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">远程 MCP 服务器的 OAuth 支持</span></a></li><li><a href="#自动-oauth-发现" title="自动 OAuth 发现" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">自动 OAuth 发现</span></a></li><li><a href="#身份验证流" title="身份验证流" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">身份验证流</span></a></li><li><a href="#浏览器重定向要求" title="浏览器重定向要求" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">浏览器重定向要求</span></a></li><li><a href="#管理-oauth-身份验证" title="管理 OAuth 身份验证" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">管理 OAuth 身份验证</span></a></li><li><a href="#oauth-配置属性" title="OAuth 配置属性" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">OAuth 配置属性</span></a></li><li><a href="#令牌管理" title="令牌管理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">令牌管理</span></a></li><li><a href="#身份验证提供者类型" title="身份验证提供者类型" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">身份验证提供者类型</span></a></li><li><a href="#示例配置" title="示例配置" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">示例配置</span></a></li><li><a href="#python-mcp-服务器-stdio" title="Python MCP 服务器 (Stdio)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Python MCP 服务器 (Stdio)</span></a></li><li><a href="#nodejs-mcp-服务器-stdio" title="Node.js MCP 服务器 (Stdio)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Node.js MCP 服务器 (Stdio)</span></a></li><li><a href="#基于-docker-的-mcp-服务器" title="基于 Docker 的 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">基于 Docker 的 MCP 服务器</span></a></li><li><a href="#基于-http-的-mcp-服务器" title="基于 HTTP 的 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">基于 HTTP 的 MCP 服务器</span></a></li><li><a href="#带有自定义标头的基于-http-的-mcp-服务器" title="带有自定义标头的基于 HTTP 的 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">带有自定义标头的基于 HTTP 的 MCP 服务器</span></a></li><li><a href="#带有工具过滤的-mcp-服务器" title="带有工具过滤的 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">带有工具过滤的 MCP 服务器</span></a></li><li><a href="#发现阶段深入" title="发现阶段深入" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">发现阶段深入</span></a></li><li><a href="#1-服务器迭代和连接" title="1. 服务器迭代和连接" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">1. 服务器迭代和连接</span></a></li><li><a href="#2-工具发现" title="2. 工具发现" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">2. 工具发现</span></a></li><li><a href="#3-冲突解决" title="3. 冲突解决" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">3. 冲突解决</span></a></li><li><a href="#4-模式处理" title="4. 模式处理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">4. 模式处理</span></a></li><li><a href="#5-连接管理" title="5. 连接管理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">5. 连接管理</span></a></li><li><a href="#工具执行流程" title="工具执行流程" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">工具执行流程</span></a></li><li><a href="#1-工具调用" title="1. 工具调用" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">1. 工具调用</span></a></li><li><a href="#2-确认过程" title="2. 确认过程" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">2. 确认过程</span></a></li><li><a href="#基于信任的绕过" title="基于信任的绕过" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">基于信任的绕过</span></a></li><li><a href="#动态允许列表" title="动态允许列表" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">动态允许列表</span></a></li><li><a href="#用户选择处理" title="用户选择处理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">用户选择处理</span></a></li><li><a href="#3-执行" title="3. 执行" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">3. 执行</span></a></li><li><a href="#4-响应处理" title="4. 响应处理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">4. 响应处理</span></a></li><li><a href="#如何与您的-mcp-服务器交互" title="如何与您的 MCP 服务器交互" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">如何与您的 MCP 服务器交互</span></a></li><li><a href="#使用-mcp-命令" title="使用 /mcp 命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">使用 <code>/mcp</code> 命令</span></a></li><li><a href="#示例-mcp-输出" title="示例 /mcp 输出" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">示例 <code>/mcp</code> 输出</span></a></li><li><a href="#工具使用" title="工具使用" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">工具使用</span></a></li><li><a href="#状态监控和故障排除" title="状态监控和故障排除" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">状态监控和故障排除</span></a></li><li><a href="#连接状态" title="连接状态" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">连接状态</span></a></li><li><a href="#服务器状态-mcpserverstatus" title="服务器状态 (MCPServerStatus)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">服务器状态 (<code>MCPServerStatus</code>)</span></a></li><li><a href="#发现状态-mcpdiscoverystate" title="发现状态 (MCPDiscoveryState)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">发现状态 (<code>MCPDiscoveryState</code>)</span></a></li><li><a href="#常见问题和解决方案" title="常见问题和解决方案" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">常见问题和解决方案</span></a></li><li><a href="#服务器无法连接" title="服务器无法连接" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">服务器无法连接</span></a></li><li><a href="#未发现工具" title="未发现工具" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">未发现工具</span></a></li><li><a href="#工具无法执行" title="工具无法执行" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">工具无法执行</span></a></li><li><a href="#沙盒兼容性" title="沙盒兼容性" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">沙盒兼容性</span></a></li><li><a href="#调试技巧" title="调试技巧" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">调试技巧</span></a></li><li><a href="#重要说明" title="重要说明" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">重要说明</span></a></li><li><a href="#安全注意事项" title="安全注意事项" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">安全注意事项</span></a></li><li><a href="#性能和资源管理" title="性能和资源管理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">性能和资源管理</span></a></li><li><a href="#模式兼容性" title="模式兼容性" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">模式兼容性</span></a></li><li><a href="#从工具返回富内容" title="从工具返回富内容" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">从工具返回富内容</span></a></li><li><a href="#工作原理" title="工作原理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">工作原理</span></a></li><li><a href="#示例返回文本和图像" title="示例：返回文本和图像" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">示例：返回文本和图像</span></a></li><li><a href="#作为斜杠命令的-mcp-提示" title="作为斜杠命令的 MCP 提示" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">作为斜杠命令的 MCP 提示</span></a></li><li><a href="#在服务器上定义提示" title="在服务器上定义提示" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">在服务器上定义提示</span></a></li><li><a href="#调用提示" title="调用提示" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">调用提示</span></a></li><li><a href="#使用-vecli-mcp-管理-mcp-服务器" title="使用 vecli mcp 管理 MCP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">使用 <code>vecli mcp</code> 管理 MCP 服务器</span></a></li><li><a href="#添加服务器-vecli-mcp-add" title="添加服务器 (vecli mcp add)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">添加服务器 (<code>vecli mcp add</code>)</span></a></li><li><a href="#添加一个-stdio-服务器" title="添加一个 stdio 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">添加一个 stdio 服务器</span></a></li><li><a href="#添加一个-http-服务器" title="添加一个 HTTP 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">添加一个 HTTP 服务器</span></a></li><li><a href="#添加一个-sse-服务器" title="添加一个 SSE 服务器" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">添加一个 SSE 服务器</span></a></li><li><a href="#列出服务器-vecli-mcp-list" title="列出服务器 (vecli mcp list)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">列出服务器 (<code>vecli mcp list</code>)</span></a></li><li><a href="#删除服务器-vecli-mcp-remove" title="删除服务器 (vecli mcp remove)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">删除服务器 (<code>vecli mcp remove</code>)</span></a></li></ul></nav></div></div></div></div></div></div></section></div>
    <div id="search-container"></div>
  </body>
</html>
